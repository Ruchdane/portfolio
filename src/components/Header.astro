---
import { SITE_TITLE, SITE_LOGO, NAVIGATION_LINKS } from '../consts';
import HeaderLink from './HeaderLink.astro';
import Sidebar from './Sidebar.astro';
import MorphingBurger from './MorphingBurger.astro';
---

<header>
	<nav>
		<h2 class="navigation-icon">
			<img src={SITE_LOGO} alt="Logo" width="32" height="32" />
			<a href="/">{SITE_TITLE}</a>
		</h2>
		<div class="navigation-links">
			{NAVIGATION_LINKS.map(({link, title}) => <HeaderLink href={link}>{title}</HeaderLink>)}
		</div>
		<button id="burger-trigger">
			<MorphingBurger />
		</button>
		<Sidebar/>
	</nav>
</header>
<style lang="scss">
	@use "../styles/media-query" as *;
	header {
		margin: 0;
		padding: 0 1em;
		background: var(--neutral-100);
		box-shadow: rgba(9, 30, 66, 0.25) 0px 4px 8px -2px, rgba(9, 30, 66, 0.08) 0px 0px 0px 1px;

	}
	h2 {
		margin: 0;
		font-size: 1em;
		text-align: center;
	}

	h2 a,
	h2 a.active {
		text-decoration: none;
	}
	nav {
		display: flex;
		align-items: center;
		justify-content: space-between;
		padding: 16px 8px;
		@include breakpoint(tablet){
			padding: 32px 16px;
		}
	}

	.navigation-links {
		display: none;
		@include breakpoint(tablet){
			display: flex;
			gap: 28px;
		}
	}
	.navigation-icon {
		display: flex;
		gap: 18px;
		align-items: center;
	}

	#burger-trigger{
		@include breakpoint(tablet){
			display: none;
		}
	}

</style>
<script>
	let showBurgerMenu = false;
	const sidebar = document.getElementById('sidebar');
	const trigger = document.getElementById('burger-trigger');
	trigger?.addEventListener('click', () => {
		showBurgerMenu = !showBurgerMenu;
		console.log(showBurgerMenu, sidebar, trigger);
		if(showBurgerMenu) {
			sidebar?.classList.add('show');
			trigger?.firstElementChild?.classList.add('cross');
		}
		else {
			sidebar?.classList.remove('show');
			trigger?.firstElementChild?.classList.remove('cross');
		}
	});
</script>