---
import { Image } from "astro:assets";
import type { Image as ImageType } from "@/schema";
import {
  Carousel as PreactCarousel,
  CarouselItem,
} from "@/components/preact/Carousel";
interface Props {
  images: ImageType[];
  limit?: number;
  class?: string;
  imagesLayout?: "constrained" | "full-width" | "fixed" | "none";
  isLazyLoaded?: boolean;
}

let { images, limit, imagesLayout, isLazyLoaded } = Astro.props;
if (limit !== undefined) {
  images = images.slice(0, limit);
}
---

<!-- How does transition name work with child component -->
<PreactCarousel client:load count={images.length}>
  {
    images.map((image, i) => (
      <CarouselItem>
        <Image
          {...image}
          loading={isLazyLoaded || i !== 0 ? "lazy" : "eager"}
          layout={imagesLayout ?? "full-width"}
        />
      </CarouselItem>
    ))
  }
</PreactCarousel>
